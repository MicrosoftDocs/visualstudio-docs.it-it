---
title: 'CA2208: Creare istanze di eccezioni di argomento correttamente'
ms.date: 05/18/2020
ms.topic: reference
f1_keywords:
- CA2208
- InstantiateArgumentExceptionsCorrectly
helpviewer_keywords:
- InstantiateArgumentExceptionsCorrectly
- CA2208
ms.assetid: e2a48939-d9fa-478c-b2f9-3bdbce07dff7
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: 238a457936ff8b14ed4262317be932e383ec7e96
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/02/2020
ms.locfileid: "88708219"
---
# <a name="ca2208-instantiate-argument-exceptions-correctly"></a>CA2208: Creare istanze di eccezioni di argomento correttamente

|Elemento|valore|
|-|-|
|CheckId|CA2208|
|Category|Microsoft. Usage|
|Modifica|Senza interruzioni|

## <a name="cause"></a>Causa

Quando un metodo ha un parametro e genera un tipo di eccezione che è o deriva da, <xref:System.ArgumentException> , è previsto che chiami un costruttore che accetta un parametro in `paramName` modo corretto. Tra le cause possibili sono incluse le situazioni seguenti:

- Viene eseguita una chiamata al costruttore predefinito (senza parametri) di un tipo di eccezione che è o deriva da, <xref:System.ArgumentException> che dispone di un costruttore che accetta un `paramName` parametro.

- Un argomento stringa errato viene passato a un costruttore con parametri di un tipo di eccezione che è o deriva da <xref:System.ArgumentException> .

- Viene passato uno dei nomi dei parametri per l' `message` argomento del costruttore del tipo di eccezione che è o deriva da <xref:System.ArgumentException> .

## <a name="rule-description"></a>Descrizione della regola

Anziché chiamare il costruttore predefinito, chiamare uno degli overload del costruttore che consente di fornire un messaggio di eccezione più significativo. Il messaggio di eccezione deve avere come destinazione lo sviluppatore e spiegare chiaramente la condizione di errore e come correggere o evitare l'eccezione.

Le firme di uno e due costruttori di stringa di <xref:System.ArgumentException> e dei relativi tipi derivati non sono coerenti rispetto alla posizione `message` e ai `paramName` parametri. Assicurarsi che questi costruttori vengano chiamati con gli argomenti stringa corretti. Le firme sono le seguenti:

- <xref:System.ArgumentException>(stringa `message` )
- <xref:System.ArgumentException>(String `message` , String `paramName` )
- <xref:System.ArgumentNullException>(stringa `paramName` )
- <xref:System.ArgumentNullException>(String `paramName` , String `message` )
- <xref:System.ArgumentOutOfRangeException>(stringa `paramName` )
- <xref:System.ArgumentOutOfRangeException>(String `paramName` , String `message` )
- <xref:System.DuplicateWaitObjectException>(stringa `parameterName` )
- <xref:System.DuplicateWaitObjectException>(String `parameterName` , String `message` )

## <a name="how-to-fix-violations"></a>Come correggere le violazioni

Per correggere una violazione di questa regola, chiamare un costruttore che accetta un messaggio, un nome di parametro o entrambi e verificare che gli argomenti siano appropriati per il tipo di <xref:System.ArgumentException> chiamata.

> [!TIP]
> Una correzione del codice è disponibile per il nome di parametro posizionato in modo errato in Visual Studio. Per usarlo, posizionare il cursore sulla riga di avviso e premere **CTRL** + **.** (punto). Scegliere **scambia l'ordine degli argomenti** dall'elenco di opzioni presentate.
>
> ![Correzione del codice per gli argomenti CA2208-swap](media/ca2208-codefix_swap.png)
>
> Se l' <xref:System.ArgumentException> Overload (String `message` ) viene usato erroneamente con un nome di parametro, il Fixer fornirebbe l'opzione per usare un costruttore di due argomenti con `null` Message.
> 
> ![Correzione del codice per gli argomenti CA2208-swap](media/ca2208-codefix_null_msg.png)

## <a name="when-to-suppress-warnings"></a>Quando escludere gli avvisi

È possibile eliminare un avviso da questa regola solo se un costruttore con parametri viene chiamato con gli argomenti stringa corretti.

## <a name="configurability"></a>Configurabilità

Se questa regola viene eseguita da [analizzatori FxCop](install-fxcop-analyzers.md) (e non con analisi legacy), è possibile configurare le parti della codebase su cui eseguire questa regola, in base all'accessibilità. Ad esempio, per specificare che la regola deve essere eseguita solo sulla superficie dell'API pubblica, aggiungere la coppia chiave-valore seguente a un file con estensione EditorConfig nel progetto:

```ini
dotnet_code_quality.ca2208.api_surface = public
```

Per impostazione predefinita, le regole di CA2208 si applicano a tutte le superficie dell'API (pubblico, interno e privato). È possibile configurare questa opzione solo per questa regola, per tutte le regole o per tutte le regole in questa categoria (progettazione). Per altre informazioni, vedere [configurare gli analizzatori FxCop](configure-fxcop-analyzers.md).

## <a name="example"></a>Esempio

Il codice seguente illustra un costruttore che crea erroneamente un'istanza di <xref:System.ArgumentNullException> .

[!code-csharp[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#1](../code-quality/codesnippet/CSharp/ca2208-instantiate-argument-exceptions-correctly_1.cs?range=3-6)]
[!code-vb[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#1](../code-quality/codesnippet/VisualBasic/ca2208-instantiate-argument-exceptions-correctly_1.vb)]

Il codice seguente corregge la violazione precedente cambiando gli argomenti del costruttore.

[!code-csharp[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#2](../code-quality/codesnippet/CSharp/ca2208-instantiate-argument-exceptions-correctly_2.cs?range=3-6)]
[!code-vb[FxCop.Usage.InstantiateArgumentExceptionsCorrectly#2](../code-quality/codesnippet/VisualBasic/ca2208-instantiate-argument-exceptions-correctly_2.vb)]

## <a name="related-rules"></a>Regole correlate

- [CA1507: Usare nameof invece della stringa](ca1507.md)
