---
title: 'CA2241: Specificare argomenti corretti ai metodi di formattazione'
ms.date: 05/28/2020
ms.topic: reference
f1_keywords:
- CA2241
- Provide correct arguments to formatting methods
- ProvideCorrectArgumentsToFormattingMethods
helpviewer_keywords:
- ProvideCorrectArgumentsToFormattingMethods
- CA2241
ms.assetid: 83639bc4-4c91-4a07-a40e-dc5e49a84494
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: 3f0ee4c1b983918a76d6fa492ace8204e70b7e3d
ms.sourcegitcommit: 1d4f6cc80ea343a667d16beec03220cfe1f43b8e
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 06/23/2020
ms.locfileid: "85283424"
---
# <a name="ca2241-provide-correct-arguments-to-formatting-methods"></a>CA2241: Specificare argomenti corretti ai metodi di formattazione

|||
|-|-|
|CheckId|CA2241|
|Category|Microsoft. Usage|
|Modifica|Senza interruzioni|

## <a name="cause"></a>Causa
L' `format` argomento di stringa passato a un metodo come <xref:System.Console.WriteLine%2A> , <xref:System.Console.Write%2A> o non <xref:System.String.Format%2A?displayProperty=fullName> contiene un elemento di formato corrispondente a ogni argomento dell'oggetto o viceversa.

Per impostazione predefinita, questa regola analizza solo le chiamate ai tre metodi sopra indicati, ma è [configurabile](#configurability). 

## <a name="rule-description"></a>Descrizione della regola
Gli argomenti dei metodi come <xref:System.Console.WriteLine%2A> , <xref:System.Console.Write%2A> e <xref:System.String.Format%2A> sono costituiti da una stringa di formato seguita da più <xref:System.Object?displayProperty=fullName> istanze. La stringa di formato è costituita da testo e elementi di formato incorporato nel formato, {index [, Alignment] [: formatString]}. 'index' è un intero in base zero che indica quali oggetti sono da formattare. Se un oggetto non dispone di un indice corrispondente nella stringa di formato, l'oggetto viene ignorato. Se l'oggetto specificato da' index ' non esiste, <xref:System.FormatException?displayProperty=fullName> viene generata un'eccezione in fase di esecuzione.

## <a name="how-to-fix-violations"></a>Come correggere le violazioni
Per correggere una violazione di questa regola, fornire un elemento di formato per ogni argomento dell'oggetto e fornire un argomento dell'oggetto per ogni elemento di formato.

## <a name="when-to-suppress-warnings"></a>Quando escludere gli avvisi
Non escludere un avviso da questa regola.

## <a name="configurability"></a>Configurabilità

Se questa regola viene eseguita da [analizzatori FxCop](install-fxcop-analyzers.md) (e non con analisi legacy), questa regola può essere configurata.

### <a name="additional-string-formatting-methods"></a>Metodi aggiuntivi per la formattazione delle stringhe

È possibile configurare nomi di metodi di formattazione di stringhe aggiuntivi che devono essere analizzati da questa regola. Ad esempio, per specificare tutti i metodi denominati `MyFormat` come metodi di formattazione della stringa, è possibile aggiungere la coppia chiave-valore seguente a un file con estensione EditorConfig nel progetto:

```ini
dotnet_code_quality.CA2241.additional_string_formatting_methods = MyFormat
```

Formati dei nomi di metodo consentiti nel valore dell'opzione (separati da' |'):
  - Solo nome metodo (include tutti i metodi con il nome, indipendentemente dal tipo o dallo spazio dei nomi che lo contiene)
  - Nomi completi nel formato dell'ID di [documentazione](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)del simbolo con `M:` prefisso facoltativo.

Esempi:

| Valore dell'opzione | Riepilogo |
| --- | --- |
|`dotnet_code_quality.CA2241.additional_string_formatting_methods = MyFormat` | Corrisponde a tutti i metodi denominati ' format ' nella compilazione
|`dotnet_code_quality.CA2241.additional_string_formatting_methods = MyFormat1|MyFormat2` | Corrisponde a tutti i metodi denominati ' MyFormat1' o ' MyFormat2' nella compilazione
|`dotnet_code_quality.CA2241.additional_string_formatting_methods = NS.MyType.MyFormat(ParamType)` | Corrisponde al metodo specifico ' format ' con la firma completa specificata
|`dotnet_code_quality.CA2241.additional_string_formatting_methods = NS1.MyType1.MyFormat1(ParamType)|NS2.MyType2.MyFormat2(ParamType)` | Corrisponde ai metodi specifici ' MyFormat1' è MyFormat2' con la rispettiva firma completa

È possibile configurare questa opzione solo per questa regola, per tutte le regole o per tutte le regole in questa categoria (utilizzo). Per altre informazioni, vedere [configurare gli analizzatori FxCop](configure-fxcop-analyzers.md).

In alternativa, anziché specificare un elenco esplicito di metodi di formattazione di stringa aggiuntivi, è possibile configurare l'analizzatore in modo da provare automaticamente a determinare il metodo di formattazione delle stringhe. Questa opzione è disabilitata per impostazione predefinita. Se l'opzione è abilitata, qualsiasi metodo con un `string format` parametro seguito da un `params object[]` parametro viene considerato un metodo di formattazione della stringa:

```ini
dotnet_code_quality.CA2241.try_determine_additional_string_formatting_methods_automatically = true
```

## <a name="example"></a>Esempio
Nell'esempio seguente vengono illustrate due violazioni della regola.

[!code-vb[FxCop.Usage.FormattingArguments#1](../code-quality/codesnippet/VisualBasic/ca2241-provide-correct-arguments-to-formatting-methods_1.vb)]
[!code-csharp[FxCop.Usage.FormattingArguments#1](../code-quality/codesnippet/CSharp/ca2241-provide-correct-arguments-to-formatting-methods_1.cs)]
