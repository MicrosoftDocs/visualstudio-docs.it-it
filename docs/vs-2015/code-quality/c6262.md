---
title: C6262 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C6262
helpviewer_keywords:
- C6262
ms.assetid: 3eddc74e-2b05-4159-a093-fd469fdcebbb
caps.latest.revision: 20
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: 8d4e4323b848a70e24b85e37a6d822feda0df172
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 09/02/2020
ms.locfileid: "77275661"
---
# <a name="c6262"></a>C6262
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

avviso C6262: la funzione usa \<constant> i byte dello stack: supera/analyze: stacksize \<constant 2> . Provare a trasferire alcuni dati nell'heap  
  
 Questo avviso indica che `constant 2` in una funzione è stato rilevato l'utilizzo dello stack che supera una soglia preimpostata (). Le dimensioni stack frame predefinite per questo avviso sono pari a 16 KB per la modalità utente, 1 KB per la modalità kernel. Lo stack, anche in modalità utente, è limitato e l'impossibilità di eseguire il commit di una pagina di stack causa un'eccezione di overflow dello stack. La modalità kernel ha un limite di dimensioni dello stack di 12 KB, che non può essere aumentato; Pertanto, il codice in modalità kernel dovrebbe limitare in modo aggressivo l'utilizzo dello stack.  
  
 Per risolvere il problema relativo a questo avviso, è possibile spostare alcuni dati nell'heap o in un'altra memoria dinamica.  In modalità utente, una stack frame di grandi dimensioni potrebbe non essere un problema, e questo avviso può essere eliminato, ma un stack frame elevato aumenta il rischio di un overflow dello stack. È possibile che si verifichi una grande stack frame se la funzione usa lo stack in modo intensivo o è ricorsivo. La dimensione totale dello stack in modalità utente può essere aumentata se si verifica effettivamente un overflow dello stack, ma solo fino al limite di sistema.  È possibile utilizzare l'opzione della riga di comando **/Analyze** per modificare il valore di `<constant 2>` , ma aumentando il rischio che un errore non venga segnalato.  
  
 Per il codice in modalità kernel, ad esempio nei progetti driver, il valore di `<constant 2>` è impostato su 1 KB. I driver ben scritti dovrebbero avere poche funzioni che si avvicinano a questo valore e la modifica del limite verso il basso potrebbe essere auspicabile.  Le stesse tecniche generali usate per il codice in modalità utente per ridurre le dimensioni dello stack possono essere adattate al codice in modalità kernel.  
  
## <a name="example"></a>Esempio  
 Il codice seguente genera questo avviso perché `char buffer` alloca 16.382 byte e la variabile di tipo Integer locale `i` alloca altri 4 byte, che insieme superano il limite di dimensioni dello stack predefinito pari a 16 KB.  
  
```cpp  
// cl.exe /c /analyze /EHsc /W4  
#include <windows.h>  
#define MAX_SIZE 16382  
  
void f( )  
{  
    int i;  
    char buffer[MAX_SIZE];  
  
    i = 0;  
    buffer[0]='\0';  
  
    // code...  
}  
  
```  
  
 Il codice seguente corregge questo avviso spostando alcuni dati nell'heap.  
  
```cpp  
// cl.exe /c /analyze /EHsc /W4  
#include <stdlib.h>     
#include <malloc.h>  
#define MAX_SIZE 16382  
  
void f( )  
{  
    int i;  
    char *buffer;  
  
    i = 0;  
    buffer = (char *) malloc( MAX_SIZE );  
    if (buffer != NULL)   
    {  
        buffer[0] = '\0';  
        // code...  
        free(buffer);  
    }  
}  
  
```  
  
 L'uso di malloc e Free presenta molti problemi in termini di perdite di memoria ed eccezioni. Per evitare completamente questi tipi di perdite e problemi di eccezione, utilizzare i meccanismi forniti dalla libreria STL (Standard Template Library) di C++. Sono inclusi [shared_ptr](https://msdn.microsoft.com/library/1469fc51-c658-43f1-886c-f4530dd84860), [unique_ptr](https://msdn.microsoft.com/library/acdf046b-831e-4a4a-83aa-6d4ee467db9a)e [vector](https://msdn.microsoft.com/library/c1431ad8-c0b6-4dbb-89c4-5f651e432d7f). Per altre informazioni, vedere [puntatori intelligenti](https://msdn.microsoft.com/library/909ef870-904c-49b6-b8cd-e9d0b7dc9435) e [libreria standard C++](https://msdn.microsoft.com/library/a37d3ba3-58af-47c7-9ee2-441ccd7b77ee).  
  
 **Per correggere questo avviso regolando le dimensioni dello stack**  
  
1. Sulla barra dei menu scegliere **progetto**, **Proprietà**.  
  
     Viene visualizzata la finestra di dialogo **Pagine delle proprietà**.  
  
2. Espandere **proprietà di configurazione**.  
  
3. Espandere **C/C++**.  
  
4. Selezionare proprietà della **riga di comando** .  
  
5. In **Opzioni aggiuntive**aggiungere **/analyze: stacksize16388**.  
  
## <a name="see-also"></a>Vedere anche  
 [/STACK (Allocazioni stack)](https://msdn.microsoft.com/library/73283660-e4bd-47cc-b5ca-04c5d739034c)   
 [_resetstkoflw](https://msdn.microsoft.com/library/319529cd-4306-4d22-810b-2063f3ad9e14)   
 [Procedura: utilizzare i controlli runtime nativi](../debugger/how-to-use-native-run-time-checks.md)
